<table st-table="$ctrl.displayedCollection" st-safe-src="$ctrl.stories.all" class="table table-hover ">
  <thead>
  <tr>
    <th colspan="1">
      <select st-search="created_by.name" st-input-event="change" class="form-control"
              placeholder="author">
        <option value="" selected>Author</option>
        <option ng-repeat="user in $ctrl.session.allUsers">{{user.name}}</option>
      </select>
    </th>
    <th colspan="1">
      <input st-search="title" class="form-control" placeholder="Search by title" type="text">
    </th>
    <th colspan="1">
      <select st-search="stage" st-input-event="change" class="form-control"
              placeholder="stage">
        <option value="" selected>Stage</option>
        <option ng-repeat="stage in $ctrl.stories.stages">{{stage}}</option>
      </select>
    </th>
    <th st-sort="created_at" st-sort-default="reverse">Created</th>
    <th st-sort="published_at" st-sort-default="reverse">Published</th>
    <th>
      <button class="btn btn-success" ng-click="$ctrl.createStory()">New story</button>
    </th>
  </tr>
  </thead>
  <tbody>
  <tr ng-repeat="story in $ctrl.displayedCollection">
    <td>{{::story.created_by.name}}</td>
    <td><a ui-sref="editStory({ _id: story._id })">{{::story.title}}</a></td>
    <td>{{::story.stage}}</td>
    <td am-time-ago="story.created_at"></td>
    <td am-time-ago="story.published_at"></td>
    <td><span class="glyphicon glyphicon-remove-sign story-grid--remove-btn"
              ng-click="$ctrl.removeStory(story)"></span></td>
  </tr>
  </tbody>
</table>


<script type="text/ng-template" id="ConfirmDeletionDialog">
  <div class="ngdialog-message">
    <h3>Are you sure?</h3>
    <p>You won't be able to undo deletion.</p>
  </div>
  <div class="ngdialog-buttons">
    <button type="button" class="btn btn-default" ng-click="closeThisDialog('button')">Cancel</button>
    <button type="button" class="btn btn-danger pull-right" ng-click="confirm(confirmValue)">Delete</button>
  </div>
  </div>
</script>
